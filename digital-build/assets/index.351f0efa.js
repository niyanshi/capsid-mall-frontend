import{d as U,u as S,a as D,bU as F,y as R,B as q,r as p,f as E,o as _,c as h,b as t,t as d,e as s,j as o,C as r,g as G,F as L,h as M,q as O,s as j,_ as z}from"./index.21f0358c.js";import{F as c,B as v}from"./index.430ca6ed.js";import{B as A}from"./index.4361dfcf.js";import{B as K}from"./index.96327232.js";import{B as H}from"./index.2f5b3fba.js";import{a as J,b as P}from"./campaign.e0699e2c.js";import{I as Q}from"./balloon.cd01906a.js";import{B as W}from"./index.2fd40793.js";import{h as X}from"./nft.2142c28f.js";import"./dayjs.min.1ba1cbc9.js";import"./icon-add.d86e97f0.js";const y=m=>(O("data-v-b07fe087"),m=m(),j(),m),Y={class:"create-wrap"},Z={class:"banner-choose"},$={class:"tips"},ee={class:"campaign-info"},ae={class:"operate"},te=y(()=>t("em",null,null,-1)),se=y(()=>t("em",null,null,-1)),ne={class:"choose-nft-modal"},oe={class:"title"},ie=["src"],le={class:"radio-area"},re={class:"main-area"},de=["src"],ce=U({__name:"index",setup(m){const{t:n}=S(),b=D(),k=F(),I=R(),a=q({campaignName:"",startTime:"",endTime:"",content:"",link:"",ownerId:Number(I.currentUser.userId),banner:"",ownerEtherAddr:I.currentUser.publicKey}),w=p(),u=p(),B=()=>{b.push("/campaign")},V=async()=>{a.startTime=a.startTime||new Date().toISOString(),a.endTime=u.value.currentValue;const l={id:w.value,...a};(await J(l)).code===0&&b.push("/campaign")},N=async l=>{const e=await P({campaignId:l});e.code===0&&(w.value=e.data.id,a.banner=e.data.banner,a.campaignName=e.data.campaignName,a.startTime=e.data.startTime,a.endTime=e.data.endTime,u.value.currentValue=e.data.endTime,a.ownerId=e.data.ownerId,a.link=e.data.link,a.content=e.data.content)},g=p(!1),f=p([]),T=async()=>{const l=await X({owner:""});f.value=l.data.map(e=>({title:e.name,id:e.tokenId,imageUrl:e.imageUrl}))},C=()=>{T(),g.value=!0},x=()=>{g.value=!1};return E(()=>{k.query.campaignId&&N(Number(k.query.campaignId))}),(l,e)=>(_(),h("div",Y,[t("div",Z,[t("span",null,d(s(n)("campaign-page.chooseBannar")),1),o(K,{modelValue:a.banner,"onUpdate:modelValue":e[0]||(e[0]=i=>a.banner=i),width:"1280",height:"200","icon-size":"100"},null,8,["modelValue"]),t("div",$,d(s(n)("campaign-page.bannerTips")),1)]),t("div",ee,[o(c,{class:"form-item",title:s(n)("campaign-page.campaignName"),width:224},{default:r(()=>[o(v,{modelValue:a.campaignName,"onUpdate:modelValue":e[1]||(e[1]=i=>a.campaignName=i),"style-type":"line",placeholder:s(n)("campaign-page.campaignName")},null,8,["modelValue","placeholder"])]),_:1},8,["title"]),o(c,{class:"form-item",title:s(n)("campaign-page.expirationDate"),width:160},{default:r(()=>[o(A,{ref_key:"expireRef",ref:u},null,512)]),_:1},8,["title"]),o(c,{class:"form-item",title:s(n)("campaign-page.describeBriefly"),width:1080},{default:r(()=>[o(v,{modelValue:a.content,"onUpdate:modelValue":e[2]||(e[2]=i=>a.content=i),"style-type":"line"},null,8,["modelValue"])]),_:1},8,["title"]),o(c,{class:"form-item",title:s(n)("campaign-page.links"),width:368},{default:r(()=>[o(v,{modelValue:a.link,"onUpdate:modelValue":e[3]||(e[3]=i=>a.link=i),"style-type":"line",placeholder:s(n)("campaign-page.pleaseEnter")},null,8,["modelValue","placeholder"])]),_:1},8,["title"]),o(c,{class:"form-item",title:s(n)("campaign-page.chooseNft"),width:368},{default:r(()=>[t("div",{onClick:C},"choose nft")]),_:1},8,["title"])]),t("div",ae,[t("div",{class:"operate-button back",onClick:B},[t("span",null,d(s(n)("campaign-page.back")),1),te]),t("div",{class:"operate-button ok",onClick:V},[t("span",null,d(s(n)("ok")),1),se])]),o(H,{visible:g.value,width:"1280",height:"688",onClose:x},{default:r(()=>[t("div",ne,[t("div",oe,[t("img",{src:s(Q),alt:""},null,8,ie),G(" "+d(s(n)("choose-nft")),1)]),t("div",le,[o(W,{data:f.value},null,8,["data"])]),t("div",re,[(_(!0),h(L,null,M(f.value,i=>(_(),h("img",{key:i.id,src:i.imageUrl},null,8,de))),128))])])]),_:1},8,["visible"])]))}});const we=z(ce,[["__scopeId","data-v-b07fe087"]]);export{we as default};
